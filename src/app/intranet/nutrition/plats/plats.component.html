<section id="nutrition">
  <section>
    <header>
      <button class="bg-valide" (click)="openDialog()">{{ l.t.nutrition['PLAT_AJOUT'] }}</button>
      <h1>{{ l.t.nutrition['PLATS_DISPO'] }}</h1>
    </header>
    <article>
      <ul>
        <li *ngFor="let plat of nutri.listePlats" [class.actif]="plat.id == selectedPlat!.id" (click)="setPlat(plat)">
          <h2>{{ plat.titre }}</h2>
          <p>{{ plat.description }}</p>
          <ul class="row">
            <li><mat-icon class="nutrition">grade</mat-icon></li>
            <li><mat-icon class="nutrition">grade</mat-icon></li>
            <li><mat-icon class="nutrition">grade</mat-icon></li>
            <li><mat-icon class="nutrition">grade</mat-icon></li>
            <li><mat-icon class="nutrition">grade</mat-icon></li>
          </ul>
        </li>
      </ul>
    </article>
  </section>
  <section>
    <app-ariane></app-ariane>
    <header>
      <form>
        <mat-form-field>
          <mat-label>{{ l.t.nutrition['PLATS_FILTRE_NOMS'] }}</mat-label>
          <input matInput [(ngModel)]="filtre" name="libre">
        </mat-form-field>
        <mat-form-field>
          <mat-label>{{ l.t.nutrition['PLATS_FILTRE_EVALS'] }}</mat-label>
          <mat-select [(ngModel)]="filtreEval">
            <mat-option value=2>{{ l.t.nutrition['PLATS_TOUS'] }}</mat-option>
            <mat-option value=1>{{ l.t.nutrition['PLATS_EVAL'] }}</mat-option>
            <mat-option value=0>{{ l.t.nutrition['PLATS_EVAL_PROBLEME'] }}</mat-option>
            <mat-option value=-1>{{ l.t.nutrition['PLATS_EVAL_NON'] }}</mat-option>
          </mat-select>
        </mat-form-field>
        <fieldset>
          <mat-checkbox>{{ l.t.nutrition['COMMUNAUTE'] }}</mat-checkbox>
          <mat-checkbox>{{ l.t.nutrition['MES_PLATS'] }}</mat-checkbox>
          <mat-checkbox>{{ l.t.nutrition['ALLERGENES_SANS'] }}</mat-checkbox>
        </fieldset>
      </form>
    </header>
    <article *ngIf="selectedPlat.id != -1">
      <h2>{{ selectedPlat.titre }}</h2>
      <h3>{{ l.t.pages['DESCR'] }}</h3>
      <p>{{ selectedPlat.description }}</p>

      <table>
        <thead>
          <tr>
            <th>{{ l.t.nutrition['INGREDIENTS'] }}</th>
            <th>{{ l.t.nutrition['QTS'] }}</th>
            <th>{{ l.t.nutrition['VALEURS_NUTRI'] }}</th>
            <th>{{ l.t.nutrition['ALLERGENES'] }}</th>
            <th>{{ l.t.nutrition['COMMUNAUTE_EVALS'] }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ingredient of selectedIngredients">
            <td><p>{{ ingredient.alim_nom_fr }}</p>
              <p><img src="assets/images/pictos/nutri/compl.svg" alt="icône composition">
                Composition - Protéines : {{ ingredient['Protéines, N x 6.25 (g\/100 g)'] }} Gr -
                Glucides : {{ ingredient['Glucides (g\/100 g)'] }} Gr -
                Lipide : {{ ingredient['Lipides (g\/100 g)'] }} Gr -
                Sucre : {{ ingredient['Sucres (g/100 g)'] }} Gr
              </p>
              <p><img src="assets/images/pictos/nutri/vitamine.svg" alt="icône vitamine">
                Vitamines C : {{ ingredient["Vitamine C (mg\/100 g)"] }} Mg -
                B1 : {{ ingredient["Vitamine B1 ou Thiamine (mg\/100 g)"] }} Mg -
                B2 : {{ ingredient["Vitamine B2 ou Riboflavine (mg\/100 g)"] }} Mg -
                B3 : {{ ingredient["Vitamine B3 ou PP ou Niacine (mg\/100 g)"] }} Mg -
                B5 : {{ ingredient["Vitamine B5 ou Acide pantothénique (mg\/100 g)"] }} Mg
              </p></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <mat-form-field id="ajouter" appearance="outline">
        <mat-label>AJOUTER</mat-label>
        <mat-select> </mat-select>
      </mat-form-field>
      <div id="boutonPageMenus">
        <span>
          <mat-form-field appearance="outline">
            <mat-label>ÉVALUER CE PLAT</mat-label>
            <mat-select [(ngModel)]="selectedEvaluation">
              <mat-option *ngFor="let eval of evaluation" [value]="eval.statut"
                (onSelectionChange)="onSelectEval($event, eval)">
                {{ eval.statut }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <!-- <button mat-raised-button color="primary" (click)="nutri.getPlatsId()">ÉVALUER</button> -->
        </span>
        <span>
          <!-- <button mat-raised-button color="primary" (click)="nutri.deletePlat(selectedPlat.id!)">SUPPRIMER</button> -->
          <button class="bg-valide">{{ l.t.form['VALIDER'] }}</button>
        </span>
      </div>
    </article>
    <article *ngIf="selectedPlat.id == -1">
      <h2>Sélectionnez un plat</h2>
      <p>Sélectionnez des plats pour connaître leurs compositions, en créer un nouveau, l'ajouter à un menu ou à votre
        planning</p>
    </article>
  </section>
</section>
<!-- Afficher le menu -->
<app-menu [idMenu]="'nutrition'" [classe]="'bg-nutrition'"></app-menu>
